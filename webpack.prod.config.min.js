const webpack=require("webpack"),HtmlWebpackPlugin=require("html-webpack-plugin"),ExtractTextPlugin=require("extract-text-webpack-plugin"),merge=require("webpack-merge"),webpackBaseConfig=require("./webpack.base.config.js"),fs=require("fs");fs.open("./src/config/env.js","w",function(err,fd){const buf='export default "production";';fs.write(fd,buf,0,buf.length,0,function(err,written,buffer){})}),module.exports=merge(webpackBaseConfig,{output:{publicPath:"/dist/",filename:"[name].[hash].js",chunkFilename:"[name].[hash].chunk.js"},plugins:[new ExtractTextPlugin({filename:"[name].[hash].css",allChunks:!0}),new webpack.optimize.CommonsChunkPlugin({name:"vendors",filename:"vendors.[hash].js"}),new webpack.DefinePlugin({"process.env":{NODE_ENV:'"production"'}}),new webpack.optimize.UglifyJsPlugin({compress:{warnings:!1}}),new HtmlWebpackPlugin({filename:"../index_prod.html",template:"./src/template/index.ejs",inject:!1})]});